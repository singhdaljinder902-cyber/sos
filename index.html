<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Safe Sakhi â€“ One Click SOS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #fff5f5;
      padding: 20px;
    }
    h1 { color: #d60000; }
    .sos-btn {
      background: red;
      color: white;
      padding: 16px 30px;
      font-size: 20px;
      border: none;
      border-radius: 12px;
      margin-top: 20px;
      cursor: pointer;
    }
    .box {
      margin-top: 30px;
      padding: 15px;
      border: 2px dashed #ff4d4d;
      border-radius: 10px;
      background: #ffffff;
    }
    input {
      padding: 10px;
      width: 90%;
      max-width: 300px;
      font-size: 16px;
    }
    .emergency {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      color: #000;
    }
  </style>
</head>

<body>

  <h1>ğŸ›¡ï¸ Safe Sakhi</h1>
  <p><b>One Click SOS â€“ Emergency Help</b></p>

  <!-- SOS BUTTON -->
  <button class="sos-btn" onclick="sendSOS()">ğŸš¨ ONE CLICK SOS</button>

  <!-- EMERGENCY 112 DISPLAY -->
  <div class="emergency">
    ğŸ“ Emergency (Police / Ambulance):  
    <a href="tel:112">112</a>
  </div>

  <!-- PARENT NUMBER SECTION -->
  <div class="box">
    <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent / Guardian Contact</h3>

    <input
      type="tel"
      id="parentNumber"
      placeholder="Enter parent mobile number"
    />
    <br><br>

    <button onclick="saveParentNumber()">Save Number</button>
    <button onclick="clearParentNumber()">Remove</button>

    <p id="savedNumber" style="margin-top:15px;font-weight:bold;"></p>
  </div>

  <script>
    const saved = localStorage.getItem("parentNumber");
    if (saved) {
      document.getElementById("savedNumber").innerText =
        "ğŸ“ Saved Parent Number: " + saved;
    }

    function saveParentNumber() {
      const number = document.getElementById("parentNumber").value;
      if (number.length < 10) {
        alert("Please enter a valid mobile number");
        return;
      }
      localStorage.setItem("parentNumber", number);
      document.getElementById("savedNumber").innerText =
        "ğŸ“ Saved Parent Number: " + number;
      alert("Parent number saved");
    }

    function clearParentNumber() {
      localStorage.removeItem("parentNumber");
      document.getElementById("savedNumber").innerText = "";
      alert("Parent number removed");
    }

    function sendSOS() {
      if (!navigator.geolocation) {
        alert("Location not supported");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        function (position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          const mapLink = "https://maps.google.com/?q=" + lat + "," + lon;

          const parent = localStorage.getItem("parentNumber");

          if (parent) {
            window.location.href = "tel:" + parent;
          } else {
            alert(
              "Parent number not found.\nCalling Emergency 112.\n\nLocation:\n" +
              mapLink
            );
            window.location.href = "tel:112";
          }
        },
        function () {
          alert("Location permission denied");
        }
      );
    }
  </script>

</body>
</html>
